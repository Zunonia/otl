{% extends 'layout.html' %}
{% load yearterm %}
{% block headers %}
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}favorites.css" />
<script type="text/javascript" src="{{MEDIA_URL}}js/dictionary.js?v=1269108500"></script>
<script type="text/javascript">
//<!--
var LinkThumb = {
	initialize: function(wrap, anchors)
		{
			this.wrap = $(wrap);
			this.anchors = $(anchors);
			this.isOver = false;
			this.onLoad();
		},
	onLoad: function()
		{
			this.thumb = $('<div>', {'class':'linkthumb'});
			this.img = $('<img>').appendTo(this.thumb);
			this.thumb.hide().appendTo(document.body);
			this.registerHandlers();
		},
	registerHandlers: function()
		{
			$(document).bind('mousemove.linkthumb', $.proxy(this.onMove, this));
			$.each(this.anchors, $.proxy(function(index, item) {
				$(item)
				.bind('mouseover.linkthumb', $.proxyWithArgs(this.onOver, this, item))
				.bind('mouseout.linkthumb', $.proxy(this.onOut, this));
			}, this));
		},
	onMove: function(e)
		{
			if (this.isOver) {
				this.thumb.css({
					'left': e.pageX + 20,
					'top': e.pageY + 20
				});
			}
		},
	onOver:function(e, item)
		{
			this.img.attr('src', 'http://open.thumbshots.org/image.aspx?url='+encodeURIComponent(item.href));
			this.thumb.stop(true,true).fadeIn();
			this.isOver=true;
			this.onMove(e);
		},
	onOut:function(e)
		{
			this.thumb.stop(true,true).hide(0);
			this.img.attr('src', '');
			this.isOver=false;
		}
};
$(document).ready(function () {
	LinkThumb.initialize('#publicFavorites', '.favorite-link');
	LinkThumb.initialize('#publicFavorites', '.search-link');
	CommentList.initialize();
});
//-->
</script>
<script type="text/javascript">
function CheckNull(form)
{
	if(form.name.value.length==0)
	{
		alert("{% trans "내용을 작성해주세요. ex) CS408 전산학 프로젝트" %}");
		form.name.focus();
		return false;
	}
	else if(form.url.value.length==0)
	{
		alert("{% trans "과목 홈페이지를 작성해주세요. ex) http://otl.kaist.ac.kr" %}");
		form.url.focus();
		return false;
	}
	else return true;
}
</script>


{% endblock %}
{% block content %}
<div class="dictionary_part">
	<span>{{course.old_code}}/{{course.score_average}}/{{course.load_average}}/{{course.gain_average}}</span>
</div>
<div class="dictionary_part">
    <span>{% trans "과목 소개" %}</span>
    <div>
		{{summary.summary}}
    </div>
</div>
<div class="dictionary_part">
    <span>{% trans "선수 과목" %}</span>
    <div>
		{{summary.prerequisite}}
    </div>
</div>
<div class="dictionary_part">
    <span>{% trans "코멘트 남기기" %}</span>
    {% if user.is_authenticated %}
	<div>
		<input type="text" name="course_id" value="{{course.id}}" hidden=true />
		<div class="course_comment_form">
			{% trans "로드" %} : 
			<input type="radio" name="load" value="1"/> {% trans "쉬움" %}
			<input type="radio" name="load" value="2"/> {% trans "무난" %}
			<input type="radio" name="load" value="3"/> {% trans "힘듬" %}
		</div>
		<div class="course_comment_form">
			{% trans "학점" %} :
			<input type="radio" name="score" value="1"/> {% trans "박함" %}
			<input type="radio" name="score" value="2"/> {% trans "무난" %}
			<input type="radio" name="score" value="3"/> {% trans "후함" %}
		</div>
		<div class="course_comment_form">
			{% trans "남는거" %} :
			<input type="radio" name="gain" value="1"/> {% trans "없음" %}
			<input type="radio" name="gain" value="2"/> {% trans "있음" %}
			<input type="radio" name="gain" value="3"/> {% trans "많음" %}
		</div>
		<div>
			<textarea name="comment" cols="50" rows="5"></textarea>
		</div>
	</div>
	<div>
		<input type="submit" name="submitComment" value="{% trans "남기기" %}" />
	</div>
    {% else %}
    <div>
        {% trans "로그인을 하셔야 코멘트를 남길 수 있습니다." %}
    </div>
    {% endif %}
</div>
<div class="dictionary_part">
    <span>{% trans "코멘트들" %}</span>
    <div class="course_comments">
        {% for comment in comments %}
        <div class="dictionary_comment">
            <div class="dictionary_comment_content">
                {{comment.comment}}<br>
            </div>
            <div class="dictionary_comment_eval">
                {% trans "평가" %} - {% trans "로드" %} : <span>{{comment.load}}</span>, {% trans "학점" %} : <span>{{comment.score}}</span>, {% trans "남는거" %} : <span>{{comment.gain}}</span>
                , By {{comment.writer}} ({{comment.written_datetime|date:"Y/m/d"}})
            </div>
			<div class="dictionary_comment_delete">
				<form action = "/dictionary/delete_comment/" method="post">
					<input type="text" name="comment_id" value="{{comment.id}}"	hidden=true />
					<input type="submit" name="submitDelete" value="지우기" />
				</form>
			</div>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
