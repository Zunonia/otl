{% extends 'base.html' %}
{% block headers %}
<link rel="stylesheet" type="text/css" href="/media/favorites.css" />
{% endblock %}
{% block content %}
<h2>과목 즐겨찾기 ({{current_year}}년 {{current_semester}}학기)</h2>
<div id="myFavorites">
	<h3>내 즐겨찾기</h3>
{% if request.user.is_authenticated %}
	<ul>
	{% for item in favorite_list %}
		<li>
			<h4>{{item.course_code}}: {{item.course_name}}</h4>
			<a class="favorite-link" href="{{item.url}}">{{item.url}}</a>
			<a class="control-delete" href="/favorites/delete/{{item.id}}">Delete</a>
		</li>
	{% endfor %}
	</ul>
{% else %}
	<p>로그인하지 않았습니다. :)</p>
{% endif %}
</div>
<div id="publicFavorites">
	<h3>다른 사람들의 즐겨찾기</h3>
	<div id="add-public-favorite">
		<a href="/favorites/create">새 즐겨찾기 추가하기</a>
	</div>
	<ul>
	{% for item in recently_added_list %}
		<li>
			<h4>{{item.course_code}}: {{item.course_name}}</h4>
			<a class="favorite-link" href="{{item.url}}">{{item.url}}</a>
			<span class="submitter">올린이 : <a href="/accounts/view/{{item.writer.user.username}}">{{item.writer.user}}</a></span>
			<a class="control-add" href="/favorite/add/{{item.id}}">Add</a>
		</li>
	{% endfor %}
	</ul>
	<div class="pages">
		{% if current_page.has_previous %}
		<a class="prev-page" href="?page={{current_page.prev_page}}">Prev</a>
		{% endif %}
		{% for page in current_page.paginator.page_range %}
		<a class="page{% ifequal page.number current_page.number %} selected{% endifequal %}" href="?page={{page.number}}">{{page.number}}</a>
		{% endfor %}
		{% if current_page.has_next %}
		<a class="next-page" href="?page={{current_page.next_page}}">Next</a>
		{% endif %}
	</div>
	<form id="search-form" method="get" action="/favorites/search/">
		<p><label for="search-query">검색 : </label><input type="text" id="search-query" name="query" value="" /><input type="submit" value="Find" /></p>
	</form>
</div>
{% endblock %}
